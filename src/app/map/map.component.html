<div class="map">
  <img ngSrc="assets/images/BunnyKingdomBoard.jpg" priority alt="Bunny kingdom board" height="1174" width="1173">
  <button
    *ngFor="let grid of mapGrids; let i = index"
    [disabled]="!grid.open"
    [ngClass]="grid.open ?
      'grid-button' : grid.grail ?
        'grid-button-grail' : grid.dug ?
          'grid-button-closed' : 'grid-button-closed-round-end'"
    [style.top.px]="calculateTop(i)"
    [style.left.px]="calculateLeft(i)"
    (click)="markGrid(i)">
    <div *ngIf="!grid.open && grid.grail; else labelTemplate" class="grid-grail">
      <img ngSrc="assets/images/Grail.png" priority alt="Grail" height="100" width="100">
    </div>
    <div *ngIf="grid.dug && !grid.grail" class="shovel">
      <img ngSrc="assets/images/Shovel.png" priority alt="Shovel" height="100" width="100">
    </div>
    <ng-template #labelTemplate>
      <div class="grid-label">
        {{ grid.label }}
      </div>
    </ng-template>
  </button>
</div>

<div class='board-top'>
  <button
    *ngFor="let button of roundButtons; let i = index"
    [ngClass]="(numberOfRoundsEnded === i) ? 'round-button' : 'round-button-disabled'"
    [disabled]="numberOfRoundsEnded !== i"
    (click)="changeRound(i)">{{button}}
  </button>
</div>

<div class='board-bottom'>
  <div class="board-container">
    <span class="board-title">Clues</span>
    <div class="clue-container-first">
      <span class="board-title">Two to Three steps</span>
      <div class="flex-container">
        <ng-container *ngFor="let clue of clueGrids | slice:0:2" >
          <div *ngIf ="clue.area === areas.PLAINS" class="image-container">
            <img ngSrc="assets/images/Plains.png" alt="Plains" height="94" width="94">
          </div>
          <div *ngIf ="clue.area === areas.FIELD" class="image-container">
            <img ngSrc="assets/images/Field.png" alt="Field" height="94" width="94">
          </div>
          <div *ngIf ="clue.area === areas.FOREST" class="image-container">
            <img ngSrc="assets/images/Forest.png" alt="Forest" height="94" width="94">
          </div>
          <div *ngIf ="clue.area === areas.WATER" class="image-container">
            <img ngSrc="assets/images/Water.png" alt="Water" height="94" width="94">
          </div>
          <div *ngIf ="clue.area === areas.MOUNTAIN" class="image-container">
            <img ngSrc="assets/images/Mountain.png" alt="Mountain" height="94" width="94">
          </div>
          <div *ngIf ="clue.area === areas.CITY" class="image-container">
            <img ngSrc="assets/images/City.png" alt="City" height="94" width="94">
          </div>
        </ng-container>
      </div>
    </div>
    <div class="clue-container-second">
      <span class="board-title">One to Two steps</span>
      <div class="flex-container">
        <ng-container *ngFor="let clue of clueGrids | slice:2: 4" >
          <div *ngIf ="clue.area === areas.PLAINS" class="image-container">
            <img ngSrc="assets/images/Plains.png" alt="Plains" height="94" width="94">
          </div>
          <div *ngIf ="clue.area === areas.FIELD" class="image-container">
            <img ngSrc="assets/images/Field.png" alt="Field" height="94" width="94">
          </div>
          <div *ngIf ="clue.area === areas.FOREST" class="image-container">
            <img ngSrc="assets/images/Forest.png" alt="Forest" height="94" width="94">
          </div>
          <div *ngIf ="clue.area === areas.WATER" class="image-container">
            <img ngSrc="assets/images/Water.png" alt="Water" height="94" width="94">
          </div>
          <div *ngIf ="clue.area === areas.MOUNTAIN" class="image-container">
            <img ngSrc="assets/images/Mountain.png" alt="Mountain" height="94" width="94">
          </div>
          <div *ngIf ="clue.area === areas.CITY" class="image-container">
            <img ngSrc="assets/images/City.png" alt="City" height="94" width="94">
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>

<button class="settings" (click)="openSettings($event)">
  <img ngSrc="assets/images/Settings.png" alt="Settings" height="75" width="75">
</button>

<div class="settings-menu" [ngClass]="{'open': isSettingsOpen}">
  <img ngSrc="assets/images/SettingsMenu.png" alt="Settings Menu" height="339" width="216">
  <span class="player-settings-text">Player count</span>
  <div
    class="player-count-container">
    <span>Two players</span>
    <button
      (click)="setPlayerCount()"
      [disabled]="playerCount === twoPlayers"
      class="player-count-button-container">
      <ng-container *ngIf="playerCount === twoPlayers; else playerCountThree">
        <pre class="player-count-button">(⚪)</pre>
      </ng-container>
      <ng-template #playerCountThree>
        <pre class="player-count-button">(  )</pre>
      </ng-template>
    </button>
  </div>
  <div
    class="player-count-container">
    <span>Three players</span>
    <button
      (click)="setPlayerCount()"
      [disabled]="playerCount === threePlayers"
      class="player-count-button-container">
      <ng-container *ngIf="playerCount === threePlayers; else playerCountTwo">
        <pre class="player-count-button">(⚪)</pre>
      </ng-container>
      <ng-template #playerCountTwo>
        <pre class="player-count-button">(  )</pre>
      </ng-template>
    </button>
  </div>
  <div
    class="sound-settings-container">
    <span>Dig sound</span>
    <button
      (click)="setDigAudio()"
      class="dig-sound-button">
      <ng-container *ngIf="digSoundOn; else digSoundOff">
        <pre>(⚪)</pre>
      </ng-container>
      <ng-template #digSoundOff>
        <pre>(  )</pre>
      </ng-template>
    </button>
  </div>
</div>
